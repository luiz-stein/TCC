<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/w3.css" type="text/css" />
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon" />
    <title>TCC Smart Contracts</title>
</head>
<body>
    <!-- Navbar (sit on top) -->
    <div class="w3-top">
        <div class="w3-bar w3-gray w3-wide w3-padding">

            <div class="w3-bar-item w3-text-dark">
                <img src="img/logo-puc.jpg" class="w3-image" alt="PUC-SP" style="width:18%">
                <b>TCC Smart Contracts</b>
            </div>
            <div class="w3-right w3-hide-small">
                <span class="w3-bar-item w3-text-dark">Alunos:</span>
                <button onclick="document.getElementById('iddaniel').style.display='block'" class="w3-bar-item w3-button w3-hover-light-green"><b>Daniel</b></button>
                <button onclick="document.getElementById('idluiz').style.display='block'" class="w3-bar-item w3-button w3-hover-light-green"><b>Luiz</b></button>
            </div>

        </div>
    </div>

    <!-- Definicao do Contrato -->
    <section class="w3-padding-64 w3-border-bottom">
        <h3 class="w3-border-bottom w3-padding-16 w3-center w3-light-gray w3-text-green">Definição do Smart Contract</h3>
        <div class="w3-container">
            <div class="w3-panel w3-leftbar w3-rightbar w3-border-cyan">
                <p>
                    O escrow é um contrato de depósito, que serve como garantia e é muito utilizado para realizar a gestão de riscos entre duas ou mais partes envolvidas em uma negociação.
                    Normalmente o escrow é estabelecido através de um contrato ou acordo comercial, onde essa garantia fica sob responsabilidade de um terceiro, até que o acordo e condições sejam cumpridas pelas partes do negócio.
                    Em nosso Smartcontract, eliminamos a figura do terceiro, simulando uma operação, baseada nas seguintes premissas:
                </p>
            </div>

            <div class="w3-panel w3-light-gray w3-leftbar w3-rightbar w3-border-cyan">
                <p>
                    1)	Caio está vendendo um Produto a Tício, pelo valor de 1X;<br />
                    2)	Caio, então, deposita 2X, para mostrar que ele é confiável;<br />
                    3)	Tício, confirma que quer comprar o produto e, também, deposita 2X;<br />
                    4)	O smartcontract então conterá o equivalente a 4X;<br />
                    5)	Caio, então, envia o produto;<br />
                    6)	Quando Tício receber o produto e confirmar este;<br />
                    7)	O smartcontract, automaticamente transfere 1X para Ticio e 3X para Caio (devolve o saldo de 1x de Tício e transfere para Caio 1X, do pagamento pela compra do produto e devolve, ainda, os 2X que Caio que havia transferido para garantia do contrato.
                    <br />
                    <br />
                    <i> OBS: Não serão tratadas as excessões, como devolução do produto por arrependimento</i>

                </p>
            </div>
        </div>
    </section>


    <!-- Processo Comprador -->
    <div class="w3-border-bottom w3-light-gray"></div>

    <section>
        <h3 class="w3-padding-16 w3-center w3-text-orange">Garantia do Comprador (Tíssio) para o Smart Contract</h3>

        <div class="w3-container w3-light-grey w3-border-top">
            <div class="w3-section w3-center w3-text-blue">
                <div>
                    <label><b>Produto que Tício comprará: <i>Vinho Langhe Nebbiolo Mauro Molino (itália)</i> </b></label>
                </div>
                <div>
                    <label><b>Valor do Produto: 1 gwei</b></label>
                </div>
                <div>
                    <label><b>Valor a ser Transferido como Garantia: 2 gwei</b></label>
                </div>
                <div class="w3-padding-16">
                    <label><b>Garantia foi efetuada ?:</b></label>
                    <label id="status_garantia_compra" class="w3-text-red"><b>Não</b></label>
                </div>
                <div class="w3-center">
                    <button id="button_garantia_comprador" class="w3-button w3-green w3-section w3-padding" type="submit" onclick="document.getElementById('id-garantia-comprador').style.display = 'block'">Efetuar Garantia do Comprador</button>
                </div>

            </div>
        </div>
    </section>

    <!-- Processo Vendedor -->

    <section>
        <h3 class="w3-padding-16 w3-center w3-text-orange">Garantia do Vendedor (Caio) para o Smart Contract</h3>

        <div class="w3-container w3-light-grey w3-border-top">
            <div class="w3-section w3-center w3-text-blue">
                <div>
                    <label><b>Produto Solicitado por Tício: <i>Vinho Langhe Nebbiolo Mauro Molino (itália)</i> </b></label>
                </div>
                <div>
                    <label><b>Valor do Produto: 1 gwei</b></label>
                </div>
                <div>
                    <label><b>Valor a ser Transferido como Garantia: 2 gwei</b></label>
                </div>
                <div class="w3-padding-16">
                    <label><b>Garantia foi efetuada ?:</b></label>
                    <label id="status_garantia_venda" class="w3-text-red"><b>Não</b></label>
                </div>
                <div class="w3-center">
                    <button id="button_garantia_vendedor" class="w3-button w3-green w3-section w3-padding" type="submit" onclick="document.getElementById('id-garantia-vendedor').style.display = 'block'">Efetuar Garantia do Vendedor</button>
                </div>

            </div>
        </div>
    </section>


    <!-- alunos -->
    <div id="iddaniel" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

            <div class="w3-center">
                <br>
                <span onclick="document.getElementById('iddaniel').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">&times;</span>
                <!--<img src="img_avatar4.png" alt="Avatar" style="width:30%" class="w3-circle w3-margin-top">-->
            </div>

            <div class="w3-container">
                <p class="w3-large w3-center"><b>Daniel Lima</b></p>
                <div class="w3-border-bottom"></div>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
                </p>
            </div>
        </div>
    </div>

    <div id="idluiz" class="w3-modal">
        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

            <div class="w3-center">
                <br>
                <span onclick="document.getElementById('idluiz').style.display='none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">&times;</span>
                <!--<img src="img_avatar4.png" alt="Avatar" style="width:30%" class="w3-circle w3-margin-top">-->
            </div>

            <div class="w3-container">
                <p class="w3-large w3-center"><b>Luiz Henrique Stein</b></p>
                <div class="w3-border-bottom"></div>
                <p>
                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
                </p>
            </div>
        </div>
    </div>
    <!-- fim alunos -->
    <!-- garantia do vendedor -->

    <div id="id-garantia-vendedor" class="w3-modal">

        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

            <div class="w3-center">
                <br>
                <span onclick="document.getElementById('id-garantia-vendedor').style.display = 'none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">&times;</span>
                <img src="img/vinho.jpg" alt="Vinho" style="width:30%" class="w3-circle w3-margin-top">
            </div>

            <div class="w3-container">
                <div class="w3-section">
                    <div class="w3-margin-bottom">
                        <label><b>Produto</b>:Vinho Langhe Nebbiolo Mauro Molino (itália)</label>
                    </div>

                    <div class=" w3-border-bottom"></div>

                    <div class="w3-margin-bottom w3-padding-16">
                        <label><b>Enviar </b>: 2 gwei como garantia</label>
                    </div>

                    <div class="w3-container w3-center w3-padding-16">

                        <button onclick="enviarGarantiaVenda()" class="w3-button w3-green w3-center" type="submit">Enviar Garantia</button>
                        <button onclick="document.getElementById('id-garantia-vendedor').style.display = 'none'" type="button" class="w3-button w3-red"> &nbsp; Não Enviar &nbsp;</button>

                    </div>

                </div>
            </div>
            <div class="w3-border-top w3-light-gray"></div>
            <div class="w3-container w3-padding-16">
                <label id="label_mensagem_garantia_vendedor"> &nbsp;</label>
            </div>
        </div>
    </div>

    <!-- fim garantia do vendedor -->
    <!-- garantia do comprador -->

    <div id="id-garantia-comprador" class="w3-modal">

        <div class="w3-modal-content w3-card-4 w3-animate-zoom" style="max-width:600px">

            <div class="w3-center">
                <br>
                <span onclick="document.getElementById('id-garantia-comprador').style.display = 'none'" class="w3-button w3-xlarge w3-transparent w3-display-topright" title="Close Modal">&times;</span>
                <img src="img/vinho.jpg" alt="Vinho" style="width:30%" class="w3-circle w3-margin-top">
            </div>

            <div class="w3-container">

                <div class="w3-section">
                    <div class="w3-margin-bottom">
                        <label><b>Produto Comprado</b>:Vinho Langhe Nebbiolo Mauro Molino (itália)</label>
                    </div>

                    <div class=" w3-border-bottom"></div>

                    <div class="w3-margin-bottom w3-padding-16">
                        <label><b>Enviar </b>: 2 gwei como garantia</label>
                    </div>

                    <div class="w3-container w3-center w3-padding-16">

                        <button onclick="enviarGarantiaCompra()" class="w3-button w3-green w3-center" type="submit">Enviar Garantia</button>

                        <button onclick="document.getElementById('id-garantia-comprador').style.display = 'none'" type="button" class="w3-button w3-red"> &nbsp; Não Enviar &nbsp;</button>

                    </div>

                </div>
            </div>
            <div class="w3-border-top w3-light-gray"></div>
            <div class="w3-container w3-padding-16">
                <label id="label_mensagem_garantia_comprador"> &nbsp;</label>
            </div>
        </div>
    </div>

    <!-- fim garantia do comprador -->

    <div class="w3-border-bottom w3-light-gray"></div>

    <footer class="w3-gray w3-padding-16">
        <span class="w3-text-dark"><b>PUC-SP - TCC Smart Contracts</b></span>
    </footer>
    <script charset="utf-8"
            src="https://cdn.ethers.io/scripts/ethers-v4.min.js"
            type="text/javascript">
    </script>
    <script src="js/abi.js"></script>
    <script src="js/blockchain.js"></script>
    <script>
        getContractBalance();
    </script>
</body>
</html>
